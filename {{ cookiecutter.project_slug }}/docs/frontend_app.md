# Frontend App

## Overview

The 'Frontend App' uses [Create React App](https://github.com/facebook/create-react-app)
with [TypeScript](https://www.typescriptlang.org) and [react-router](https://reacttraining.com/react-router/).

You can learn more in the [Create React App documentation](https://facebook.github.io/create-react-app/docs/getting-started).

To learn React, check out the [React documentation](https://reactjs.org/).


## Running the Dev Server

If you have `yarn` installed on you host machine, you can start the dev server
with the `start_dev_server.sh` script:

```
$ cd frontend_app
$ ./start_dev_server.sh
```

You can then access the dev server at http://localhost:3000

The page will reload if you make edits. You will also see any lint errors in
the console.

If you don't have `yarn` installed on your host machine you can start the dev
server on the `controller` VM instead, although you may find this to be slower:

```
$ ./ssh_frontend.sh
[vagrant@controller frontend_app]$ ./start_dev_server.sh
```

You can then access the dev server at http://{{ cookiecutter.frontend_app_dev_hostname }}:3000

## Formatting

To run the [prettier](https://prettier.io) formatter:

```
$ yarn run prettier
```

## Creating a Production-Ready Build

A production-ready build of the frontend app is automatically generated by the
Ansible provisioning. This is an optimised and minified build which is ready to
be deployed.

If you want to see this build in action on the dev environment, run:

```
vagrant up --provision
```

and visit https://{{ cookiecutter.frontend_app_dev_hostname }}.

## Serving in Production

The production build of the frontend app is served with NGINX. All http
requests are redirected to https. The contents of `build/static/` are served as
regular files, with all other urls are redirected to `index.html` if a file with
a matching file is not found. We rely on `react-router` to handle matching/non
matching routes accordingly.
